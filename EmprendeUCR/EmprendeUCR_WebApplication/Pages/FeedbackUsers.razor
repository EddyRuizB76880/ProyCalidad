@page "/messagePage"
@using Microsoft.AspNetCore.WebUtilities
@inject IJSRuntime JsRuntime
@inject NavigationManager NavigationManager

@if (cargando)
{
    <h3> Cargando...</h3>
}
else
{
    <div class="messageBlock">
        <h3> @principalMessage </h3>
        <h5> @secundaryMessage </h5>
    </div>
}



@code {
    int message_Type = 0;
    string principalMessage = "Error desconocido";
    string secundaryMessage = "";
    bool cargando = true;

    protected override void OnInitialized()
    {
        var uri = NavigationManager.ToAbsoluteUri(NavigationManager.Uri);
        if (QueryHelpers.ParseQuery(uri.Query).TryGetValue("type", out var parameter))
        {
            message_Type = Convert.ToInt32(parameter);
        }

        if (message_Type > 0)
        {
            switch (message_Type)
            {
                /*Email Send failure*/
                case 1:
                    principalMessage = "Fallo en el envío de Correo de Confirmación";
                    secundaryMessage = "Correo ya ha sido registrado con anterioridad.";
                    break;

                /*Password modify success*/
                case 2:
                    principalMessage = "Contraseña modificada con éxito";
                    secundaryMessage = "Por favor inicie sesión con las nuevas credenciales.";
                    break;

                /*Error user registration*/
                case 3:
                    principalMessage = "Error registrando datos del usuario";
                    secundaryMessage = "Correo ya ha sido confirmado o no fue encontrado, por favor inicie sesión o recupere la cuenta.";
                    break;

                /*Email Send Success*/
                case 4:
                    principalMessage = "Correo de Confirmación enviado con éxito";
                    secundaryMessage = "Por favor revise su bandeja de entrada.";
                    break;

                /*Password recover feedback*/
                case 5:
                    principalMessage = "Enviamos un correo a su cuenta";
                    secundaryMessage = "Por favor revise su bandeja de entrada y siga los pasos para recuperar su cuenta.";
                    break;

                /*Email not found*/
                case 6:
                    principalMessage = "Correo no encontrado";
                    secundaryMessage = "Por favor verifique que sea correcto.";
                    break;
            }
        }
        cargando = false;
    }

}
